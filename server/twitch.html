<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Alerts - Acosmibot</title>
    <link rel="icon" type="image/png" href="/images/acosmibot-logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/base.css">
    <link rel="stylesheet" href="/styles/guild-dashboard-new.css">
</head>
<body>
    <!-- Guild Dashboard Layout -->
    <div class="dashboard-container">
        <!-- Far-Left Guild Selector Sidebar -->
        <aside class="guild-selector-sidebar">
            <div class="guild-icon-list" id="guildIconList">
                <!-- Populated by JavaScript -->
            </div>
        </aside>

        <!-- Navigation Sidebar -->
        <aside class="navigation-sidebar">
            <!-- Navigation Menu (populated by dashboard-core.js) -->
            <nav class="sidebar-nav" id="dashboardNavigation">
                <!-- Populated by JavaScript -->
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Right Indicators -->
            <div class="top-indicators">
                <div class="notification-indicator"></div>
                <div class="user-avatar"></div>
            </div>

            <!-- Page Header -->
            <header class="dashboard-header">
                <div class="header-left">
                    <h1>Twitch Alerts</h1>
                    <p class="feature-description">Choose what streamers you want to get alerts for</p>
                </div>
            </header>

            <!-- Feature Content -->
            <div class="feature-container">
                <!-- Feature Toggle -->
                <div class="form-section">
                    <div class="feature-header">
                        <h3>Enable Twitch Alerts</h3>
                        <div class="feature-header-controls">
                            <button id="saveButton" class="save-btn" onclick="saveAllChanges()" disabled>
                                <span class="save-icon">üíæ</span>
                                Save Changes
                                <span class="unsaved-indicator" style="display: none;">‚óè</span>
                            </button>
                            <label class="toggle-switch">
                                <input type="checkbox" id="featureToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Followed Streams Section -->
                <div class="form-section">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                        <h3 style="margin: 0;">Followed Streams</h3>
                        <span id="streamerLimitDisplay" class="limit-display">0 of 1</span>
                    </div>
                    <div id="streamersList">
                        <!-- Populated by JavaScript -->
                    </div>
                    <button class="btn-add-streamer" onclick="addStreamer()">+</button>
                </div>

                <!-- Selected Streamer Indicator -->
                <div id="selectedStreamerIndicator" class="selected-streamer-indicator" style="display: none;">
                    <span>Editing settings for: <strong id="selectedStreamerNameIndicator"></strong></span>
                    <button class="btn-clear-indicator" onclick="clearStreamerSelection()">‚úï Clear Selection</button>
                </div>

                <!-- Channel Dropdown -->
                <div class="form-section">
                    <h3>Channel</h3>
                    <select id="channelSelect" class="feature-select">
                        <option value="">Select a channel...</option>
                    </select>
                </div>

                <!-- Ping Roles Dropdown (Multi-select) -->
                <div class="form-section">
                    <h3>Ping Roles</h3>
                    <select id="pingRolesSelect" class="feature-select" multiple size="6">
                        <!-- Populated by JavaScript -->
                    </select>
                    <p class="field-hint">Hold Ctrl/Cmd to select multiple roles</p>
                </div>

                <!-- Announcement Message Section -->
                <div class="form-section">
                    <h3>Announcement Message</h3>
                    <textarea id="announcementMessageTextarea" class="message-textarea" rows="4">{username} is live!</textarea>
                    <div class="variable-tags">
                        <span class="var-tag">{username}</span>
                        <span class="var-tag">{game}</span>
                        <span class="var-tag">{title}</span>
                        <span class="var-tag">{viewer_count}</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Shared Scripts -->
    <script src="/scripts/shared/dashboard-core.js"></script>
    <script src="/scripts/shared/dashboard-state.js"></script>
    <script src="/scripts/shared/dashboard-ui.js"></script>

    <!-- Feature-Specific Script -->
    <script src="/scripts/features/twitch.js"></script>
</body>
</html>
