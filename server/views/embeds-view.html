<!-- Embeds Feature - List View -->
<div id="embedsListView" class="embeds-view-section">
<div class="embeds-container">
    <!-- Dashboard Header for Server Branding -->
    <header class="dashboard-header">
        <div class="header-left">
            <h1>Custom Embeds</h1>
            <p class="feature-description">Create and manage Discord embeds</p>
        </div>
    </header>

    <!-- Embeds Counter Header -->
    <div class="embeds-header">
        <div id="embedsCounter" class="embeds-counter">
            <span id="embedCount">0</span> of <span id="embedLimit">5</span> embeds
        </div>
        <button id="createEmbedBtn" class="create-embed-btn">
            + Create Embed
        </button>
    </div>

    <!-- Embeds Grid -->
    <div id="embedsGrid" class="embeds-grid">
        <!-- Populated by JavaScript -->
    </div>

    <!-- Empty State -->
    <div id="embedsEmptyState" class="embeds-empty" style="display: none;">
        <div class="embeds-empty-icon">üìù</div>
        <h2>No Embeds Yet</h2>
        <p>Create your first custom embed to get started!</p>
        <button class="create-embed-btn" onclick="document.getElementById('createEmbedBtn').click()">
            + Create Your First Embed
        </button>
    </div>

    <!-- Loading State -->
    <div id="embedsLoading" class="embeds-empty" style="display: none;">
        <div class="embeds-empty-icon">‚è≥</div>
        <h2>Loading Embeds...</h2>
    </div>
</div>

<!-- Preview Modal -->
<div id="previewModal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="EmbedsFeature.hidePreviewModal()"></div>
    <div class="modal-content preview-modal-content">
        <div class="modal-header">
            <h2>Embed Preview</h2>
            <button class="modal-close" onclick="EmbedsFeature.hidePreviewModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div id="modalPreviewContainer">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="EmbedsFeature.hideDeleteModal()"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h2>Delete Embed?</h2>
            <button class="modal-close" onclick="EmbedsFeature.hideDeleteModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to delete this embed?</p>
            <p style="color: #FF4444; margin-top: 12px;">This action cannot be undone. If this embed was sent to Discord, the message will be deleted as well.</p>
        </div>
        <div class="modal-actions">
            <button class="modal-btn cancel-btn" onclick="EmbedsFeature.hideDeleteModal()">Cancel</button>
            <button id="confirmDeleteBtn" class="modal-btn delete-btn">Delete Embed</button>
        </div>
    </div>
</div>

<style>
/* Modal Styles */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
}

.modal-content {
    position: relative;
    background: #2D2D2D;
    border-radius: 12px;
    padding: 0;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid #404040;
}

.modal-header h2 {
    margin: 0;
    color: #FFFFFF;
    font-size: 20px;
}

.modal-close {
    background: transparent;
    border: none;
    color: #B0B0B0;
    font-size: 28px;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: background 0.2s;
}

.modal-close:hover {
    background: #404040;
}

.modal-body {
    padding: 24px;
    color: #B0B0B0;
    font-size: 14px;
    line-height: 1.6;
}

.modal-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding: 20px 24px;
    border-top: 1px solid #404040;
}

.modal-btn {
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
    border: none;
}

.modal-btn.cancel-btn {
    background: #404040;
    color: #FFFFFF;
}

.modal-btn.cancel-btn:hover {
    background: #505050;
}

.modal-btn.delete-btn {
    background: #FF4444;
    color: #FFFFFF;
}

.modal-btn.delete-btn:hover {
    background: #FF3333;
}

.preview-modal-content {
    max-width: 600px;
    width: 90%;
}

.preview-modal-content .modal-body {
    max-height: 70vh;
    overflow-y: auto;
    padding: 24px;
    background: #2D2D2D;
    text-align: left;
}

/* Override centering for modal preview - match builder view exactly */
#previewModal .discord-message-preview {
    margin: 0;
    max-width: 100%;
    text-align: left;
}

#previewModal .discord-embed {
    max-width: 100%;
    text-align: left;
}

#previewModal .discord-embed-content {
    text-align: left;
}

#previewModal .discord-message-text {
    text-align: left;
}

#previewModal .discord-embed-title {
    text-align: left;
}

#previewModal .discord-embed-description {
    text-align: left;
}

#previewModal .discord-embed-author {
    text-align: left;
}

#previewModal .discord-embed-footer {
    text-align: left;
}

#previewModal .discord-embed-field-name {
    text-align: left;
}

#previewModal .discord-embed-field-value {
    text-align: left;
}

#previewModal .discord-buttons {
    text-align: left;
}

#previewModal .embed-char-indicator {
    text-align: left;
    margin-top: 12px;
}
</style>

</div>

<!-- Embeds Feature - Builder View -->
<div id="embedsBuilderView" class="embeds-view-section" style="display: none;">
<div class="embeds-builder">
    <!-- Builder Header -->
    <div class="builder-header">
        <h1 id="builderTitle">Create Embed</h1>
        <p class="builder-subtitle">Design your custom Discord embed with live preview</p>
    </div>

    <!-- Two Column Layout -->
    <div class="builder-layout">
        <!-- Left: Live Preview -->
        <div class="builder-preview-section">
            <h2>Live Preview</h2>
            <div id="embedPreviewContainer">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- Right: Form Builder -->
        <div class="builder-form-section">
            <!-- Message Settings -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('messageSettings')">
                    <h3>Message Settings</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="messageSettings" class="form-section-content">
                    <div class="form-group">
                        <label class="form-label">Embed Name (Internal)</label>
                        <input type="text" id="embedName" class="form-input" placeholder="My Cool Embed">
                        <p style="color: #72767d; font-size: 12px; margin-top: 4px;">
                            Internal name for organization (not shown in Discord)
                        </p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Message Text (Optional)</label>
                        <textarea id="messageText" class="form-textarea" placeholder="Text content before the embed..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Target Channel</label>
                        <select id="targetChannel" class="form-select">
                            <option value="">Select a channel...</option>
                            <!-- Populated by JavaScript -->
                        </select>
                    </div>
                </div>
            </div>

            <!-- Author Section -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('authorSection')">
                    <h3>Author</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="authorSection" class="form-section-content collapsed">
                    <div class="form-group">
                        <label class="form-label">Author Name</label>
                        <input type="text" id="authorName" class="form-input" placeholder="Author Name">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Author URL (Optional)</label>
                        <input type="url" id="authorUrl" class="form-input" placeholder="https://example.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Author Icon (Optional)</label>
                        <div class="image-upload-group">
                            <input type="url" id="authorIcon" class="form-input" placeholder="https://...">
                            <button class="image-upload-btn" onclick="EmbedsFeature.uploadImage('author_icon')">
                                Upload
                            </button>
                        </div>
                        <img id="authorIconPreview" class="image-preview" style="display: none;">
                    </div>
                </div>
            </div>

            <!-- Embed Content -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('embedContent')">
                    <h3>Embed Content</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="embedContent" class="form-section-content">
                    <div class="form-group">
                        <label class="form-label">Title</label>
                        <input type="text" id="embedTitle" class="form-input" placeholder="Embed Title">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea id="embedDescription" class="form-textarea" rows="6" placeholder="Embed description..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Title URL (Optional)</label>
                        <input type="url" id="embedUrl" class="form-input" placeholder="https://example.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Color</label>
                        <input type="color" id="embedColor" class="form-color-input" value="#00D9FF">
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('mediaSection')">
                    <h3>Media</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="mediaSection" class="form-section-content collapsed">
                    <div class="form-group">
                        <label class="form-label">Thumbnail (Optional)</label>
                        <div class="image-upload-group">
                            <input type="url" id="thumbnailUrl" class="form-input" placeholder="https://...">
                            <button class="image-upload-btn" onclick="EmbedsFeature.uploadImage('thumbnail')">
                                Upload
                            </button>
                        </div>
                        <img id="thumbnailPreview" class="image-preview" style="display: none;">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Image (Optional)</label>
                        <div class="image-upload-group">
                            <input type="url" id="imageUrl" class="form-input" placeholder="https://...">
                            <button class="image-upload-btn" onclick="EmbedsFeature.uploadImage('image')">
                                Upload
                            </button>
                        </div>
                        <img id="imagePreview" class="image-preview" style="display: none;">
                    </div>
                </div>
            </div>

            <!-- Fields Section -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('fieldsSection')">
                    <h3>Fields</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="fieldsSection" class="form-section-content collapsed">
                    <div id="fieldsList" class="fields-list">
                        <!-- Populated by JavaScript -->
                    </div>
                    <button class="add-field-btn" onclick="EmbedsFeature.addField()">
                        + Add Field
                    </button>
                </div>
            </div>

            <!-- Footer Section -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('footerSection')">
                    <h3>Footer</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="footerSection" class="form-section-content collapsed">
                    <div class="form-group">
                        <label class="form-label">Footer Text</label>
                        <input type="text" id="footerText" class="form-input" placeholder="Footer text">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Footer Icon (Optional)</label>
                        <div class="image-upload-group">
                            <input type="url" id="footerIcon" class="form-input" placeholder="https://...">
                            <button class="image-upload-btn" onclick="EmbedsFeature.uploadImage('footer_icon')">
                                Upload
                            </button>
                        </div>
                        <img id="footerIconPreview" class="image-preview" style="display: none;">
                    </div>

                    <div class="form-group">
                        <label class="field-inline-checkbox">
                            <input type="checkbox" id="includeTimestamp">
                            Include Timestamp
                        </label>
                    </div>
                </div>
            </div>

            <!-- Buttons Section -->
            <div class="form-section">
                <div class="form-section-header" onclick="EmbedsFeature.toggleSection('buttonsSection')">
                    <h3>Buttons</h3>
                    <span class="form-section-toggle">‚ñº</span>
                </div>
                <div id="buttonsSection" class="form-section-content collapsed">
                    <div id="buttonsList" class="buttons-list">
                        <!-- Populated by JavaScript -->
                    </div>
                    <button id="addButtonBtn" class="add-button-btn" onclick="EmbedsFeature.addButton()">
                        + Add Button
                    </button>
                    <p class="button-count-info">
                        <span id="buttonCount">0</span> of 25 buttons (max 5 per row)
                    </p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="builder-actions">
                <button class="builder-action-btn cancel-btn" onclick="EmbedsFeature.cancelBuilder()">
                    Cancel
                </button>
                <button class="builder-action-btn save-btn" onclick="EmbedsFeature.saveDraft()">
                    Save Draft
                </button>
                <button id="sendEmbedBtn" class="builder-action-btn send-btn" onclick="EmbedsFeature.sendEmbed()">
                    Send to Discord
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Hidden file input for image uploads -->
<input type="file" id="imageUploadInput" accept="image/png,image/jpeg,image/jpg,image/gif,image/webp" style="display: none;">

</div>
